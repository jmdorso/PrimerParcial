/*
 * informes.c
 *
 *  Created on: 17 oct. 2019
 *      Author: alumno
 */

#include "informes.h"
#include "pedidos.h"
#include <stdio.h>
#include <stdio_ext.h>
#include <stdlib.h>
#include <string.h>

int clienteConMasPedidosPendientes(sCliente *aCliente,int cantClientes,sPedido *aPedido,int cantPedidos,auxContCliente *aCont,int cantCont)
{
	int retorno = EXIT_ERROR;
	int i;
	int auxIdCliente;
	int posCliente;
	int posPedido;
	int max;

	if(aCliente != NULL && cantClientes>0 &&
		aPedido != NULL && cantPedidos>0 &&
		aCont != NULL && cantCont>0)
	{
		contadorDePedidosPendientePorCliente(aCliente,cantClientes,aPedido,cantPedidos,aCont,cantCont);
		for(i=0;i<cantPedidos;i++)
		{
			if(i==0)
			{
				max=aCont[i].contPedidos;
			}
			if(aCont[i].contPedidos > max)
			{
				max=aCont[i].contPedidos;
				auxIdCliente = aCont[i].contPedidos;
				posCliente = buscarClientePorId(aCliente,cantClientes,auxIdCliente);
				if(auxIdCliente == aCliente[posCliente] && auxIdCliente == aPedido[i].idCliente)
				{
					printf("El Cliente con mas pedidos pendientes es: \n");
					printf("Nombre: %s",aCliente[posCliente].nombre);
					printf("CUIT: %s",aCliente[posCliente].cuit);
					printf("Localidad: %s",aCliente[posCliente].localidad);
					printf("Direccion: %s",aCliente[posCliente].direccion);
					printf("CANT DE PEDIDOS PENDIENTES: %d",aCont[i].contPedidos);
					retorno=EXIT_SUCCESS;
				}
			}

		}

	}

	return retorno;
}
