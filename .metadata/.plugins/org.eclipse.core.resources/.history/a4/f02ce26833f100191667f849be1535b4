/*
 * informes.c
 *
 *  Created on: 17 oct. 2019
 *      Author: alumno
 */

#include "informes.h"
#include "pedidos.h"
#include <stdio.h>
#include <stdio_ext.h>
#include <stdlib.h>
#include <string.h>

int clienteConMasPedidosPendientes(sCliente *aCliente,int cantClientes,sPedido *aPedido,int cantPedidos,auxContCliente *aCont,int cantCont)
{
	int retorno = EXIT_ERROR;
	int i;
	int auxIdCliente;
	int posCliente;
	int posPedido;
	int max=0;;

	if(aCliente != NULL && cantClientes>0 &&
		aPedido != NULL && cantPedidos>0 &&
		aCont != NULL && cantCont>0)
	{
		contadorDePedidosPendientePorCliente(aCliente,cantClientes,aPedido,cantPedidos,aCont,cantCont);

		for(i=0;i<cantPedidos;i++)
		{
			if(i==0)
			{
				max=aCont[i].contPedidos;
			}
			if(aCont[i].contPedidos > max)
			{
				max=aCont[i].contPedidos;
				auxIdCliente=aCont[i].idCliente;
				if(auxIdCliente == aCliente[i].id)
				{
					posCliente=buscarClientePorId(aCliente,cantClientes,auxIdCliente);
					retorno = EXIT_SUCCESS;
				}
			}
		}
		printf("\nEl cliente que mas pedidos posee es: \n");
		printf("Nombre: %s\n",aCliente[posCliente].nombre);
		printf("CUIT: %s\n",aCliente[posCliente].cuit);
		printf("Localidad: %s\n",aCliente[posCliente].localidad);
		printf("Direccion: %s\n",aCliente[posCliente].direccion);
		printf("CANT PEDIDOS PENDIENTES %d",max);
	}


	return retorno;
}
